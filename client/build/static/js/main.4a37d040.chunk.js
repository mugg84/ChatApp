(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,a){e.exports={btn:"Message_btn__2EK1t",message__client:"Message_message__client__2AfrC",message__other:"Message_message__other__2Q9sJ",client__text:"Message_client__text__3Ltq9",other__text:"Message_other__text__T0f7Z"}},106:function(e,t){},12:function(e,t,a){e.exports={btn:"InfoBar_btn__337L-",infoBar:"InfoBar_infoBar__2lfYO",infoBar__left:"InfoBar_infoBar__left__r80ml",infoBar__right:"InfoBar_infoBar__right__2Dmf2"}},129:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),s=a(61),o=a.n(s),m=a(16),l=a(1),_=Object(r.createContext)(),i=a(62),u=a.n(i),f=function(){var e=Object(r.useContext)(_).alert;return c.a.createElement("p",{className:u.a.alert},e?e.error:"")},A=a(6),p=a.n(A),E=function(){var e=Object(r.useContext)(_),t=e.name,a=e.room,n=e.setName,s=e.setRoom,o=e.setAlert,l=function(e){"name"===e.target.name?n(e.target.value):"room"===e.target.name&&s(e.target.value)};return c.a.createElement("section",{className:p.a.main},c.a.createElement("h1",{className:p.a.main__title},"Join"),c.a.createElement("form",{className:p.a.form},c.a.createElement("label",{className:p.a.form__label},"Name"),c.a.createElement("input",{className:p.a.form__input,name:"name","data-testid":"name",type:"text",onChange:l}),c.a.createElement("label",{className:p.a.form__label},"Room"),c.a.createElement("input",{className:p.a.form__input,name:"room","data-testid":"room",type:"text",onChange:l})),c.a.createElement("div",{className:p.a.alert},c.a.createElement(f,null)),c.a.createElement(m.b,{onKeyPress:function(e){console.log("d")},onClick:function(e){t&&a||(e.preventDefault(),o({error:"Please fill all the inputs"}))},to:"/chat?name=".concat(t,"&room=").concat(a)},c.a.createElement("button",{className:"".concat(p.a.btn," ").concat(p.a["btn--submit"]),type:"submit","data-testid":"submit"},"Sign In")))},b=a(71),g=a(18),h=a(64),N=a.n(h),d=a(65),O=a.n(d),x=a(66),j=a.n(x),C=a(67),M=a.n(C),y=a(12),R=a.n(y),I=function(){var e=Object(r.useContext)(_).room;return c.a.createElement("article",{className:R.a.infoBar},c.a.createElement("section",{className:R.a.infoBar__left},c.a.createElement("img",{className:R.a.img,src:M.a,alt:"online"}),c.a.createElement("h3",{className:R.a.room},"Room ",e)),c.a.createElement("section",{className:R.a.infoBar__right},c.a.createElement("a",{href:"/"},c.a.createElement("img",{className:R.a.img,src:j.a,alt:"close chat"}))))},v=a(19),B=a.n(v),S=function(e){var t=e.message,a=e.setMessage,n=e.sendMessage;return c.a.createElement("form",{className:B.a.form},c.a.createElement("input",{className:B.a.form__input,value:t,onChange:function(e){return a(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?n(e):null},type:"text",placeholder:"Type a message"}),c.a.createElement("button",{className:"".concat(B.a.btn," ").concat(B.a["btn--send"]),type:"submit",name:"submit",onClick:function(e){return n(e)}},"Send"))},Q=a(68),T=a.n(Q),w=a(40),J=a.n(w),U=a(10),k=a.n(U),G=function(e){var t=e.message,a=t.user,n=t.text,r=!1,s=e.name.trim().toLowerCase();return a===s&&(r=!0),c.a.createElement("div",{className:k.a.message},r?c.a.createElement("div",{className:k.a.message__client},c.a.createElement("p",{className:k.a.client__user},s),c.a.createElement("p",{className:k.a.client__text},J.a.emojify(n))):c.a.createElement("div",{className:k.a.message__other},c.a.createElement("p",{className:k.a.other__text},J.a.emojify(n)),c.a.createElement("p",{className:k.a.other__user},a)))},K=a(69),V=a.n(K),L=function(e){var t=e.messages,a=Object(r.useContext)(_).name;return c.a.createElement(T.a,{className:V.a.container},t.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(G,{message:e,name:a}))})))},Y=function(){var e=Object(r.useState)(""),t=Object(g.a)(e,2),a=t[0],s=t[1],o=Object(r.useState)([]),m=Object(g.a)(o,2),i=m[0],u=m[1],f=Object(r.useContext)(_),A=f.name,p=f.setName,E=f.room,h=f.setAlert,d="https://react--chat-app-123.herokuapp.com/";Object(r.useEffect)((function(){return(n=N()(d)).emit("join",{name:A,room:E},(function(e){e&&(p(""),h({error:e}))})),function(){n.emit("disconnect"),n.off()}}),[d,A,E]),Object(r.useEffect)((function(){n.on("message",(function(e){u([].concat(Object(b.a)(i),[e]))}))}),[i]);return A&&E?c.a.createElement("section",{className:O.a.chat},c.a.createElement(I,null),c.a.createElement(L,{messages:i}),c.a.createElement(S,{message:a,setMessage:s,sendMessage:function(e){e.preventDefault(),a&&n.emit("sendMessage",a,(function(){return s("")}))}})):c.a.createElement(l.a,{to:"/"})},D=a(8),P=function(e,t){switch(t.type){case"GET_NAME":return Object(D.a)(Object(D.a)({},e),{},{name:t.payload});case"GET_ROOM":return Object(D.a)(Object(D.a)({},e),{},{room:t.payload});case"SET_ALERT":return Object(D.a)(Object(D.a)({},e),{},{alert:t.payload});case"REMOVE_ALERT":return Object(D.a)(Object(D.a)({},e),{},{alert:null});default:return e}},W=function(e){var t=Object(r.useReducer)(P,{name:"",room:"",alert:null}),a=Object(g.a)(t,2),n=a[0],s=a[1];return c.a.createElement(_.Provider,{value:{name:n.name,room:n.room,alert:n.alert,setName:function(e){s({type:"GET_NAME",payload:e})},setRoom:function(e){s({type:"GET_ROOM",payload:e})},setAlert:function(e){s({type:"SET_ALERT",payload:e}),setTimeout((function(){return s({type:"REMOVE_ALERT"})}),5e3)}}},e.children)},X=a(70),q=a.n(X),Z=function(){return c.a.createElement(W,null,c.a.createElement(m.a,null,c.a.createElement("section",{className:q.a.app},c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/",exact:!0,component:E}),c.a.createElement(l.b,{path:"/chat",component:Y})))))};o.a.render(c.a.createElement(Z,null),document.querySelector("#root"))},19:function(e,t,a){e.exports={btn:"Input_btn__2VME4",form:"Input_form__RQGj2",form__input:"Input_form__input__DQ8s7","btn--send":"Input_btn--send__1DlME"}},6:function(e,t,a){e.exports={btn:"Join_btn__2H5pM",main:"Join_main__SkVR2",form:"Join_form__2dQaQ",alert:"Join_alert__1v-Cp"}},62:function(e,t,a){e.exports={btn:"Alert_btn__1j1hk",alert:"Alert_alert__20BA7"}},65:function(e,t,a){e.exports={btn:"Chat_btn__3DhKA",chat:"Chat_chat__XbrIM"}},66:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII="},67:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII="},69:function(e,t,a){e.exports={btn:"Messages_btn__nhlUw",container:"Messages_container__2VWd8"}},70:function(e,t,a){e.exports={btn:"App_btn__3w4nk",app:"App_app__1XBWb"}},72:function(e,t,a){e.exports=a(129)}},[[72,1,2]]]);
//# sourceMappingURL=main.4a37d040.chunk.js.map